[gd_scene load_steps=15 format=3 uid="uid://dvdwdt6vbluqh"]

[ext_resource type="PackedScene" uid="uid://bqe8adk2boluh" path="res://systems/combat/laser.tscn" id="1_laser"]
[ext_resource type="Script" uid="uid://cdwve1ivpvgr2" path="res://entities/player/ships/player_ship/player_ship.gd" id="1_script"]
[ext_resource type="PackedScene" uid="uid://d4dv0b3xwkoqr" path="res://components/lighting/player_flashlight.tscn" id="2_pm10k"]
[ext_resource type="Texture2D" uid="uid://cnubtx36mai4h" path="res://assets/art/player/crew/paladin-mech.png" id="3_pm10k"]
[ext_resource type="PackedScene" uid="uid://hx0v5hqvqkmy" path="res://components/health_component/health_component.tscn" id="4_health"]
[ext_resource type="PackedScene" uid="uid://c5k8x6v4pbwi" path="res://components/speed_component/speed_component.tscn" id="5_speed"]
[ext_resource type="PackedScene" path="res://components/weapon_manager/weapon_manager.tscn" id="6_weapon"]
[ext_resource type="Texture2D" uid="uid://ctj01b5tt5qtv" path="res://assets/art/lights/light.webp" id="8_3soja"]
[ext_resource type="Script" uid="uid://cq6gi25hkhyv3" path="res://entities/player/player_controller.gd" id="10_controller"]
[ext_resource type="PackedScene" path="res://components/health_bar/health_bar.tscn" id="11_health_bar"]

[sub_resource type="CircleShape2D" id="CircleShape2D_ship"]
radius = 12.0

[sub_resource type="CircleShape2D" id="CircleShape2D_pickup"]
radius = 32.0

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_1"]
properties/0/path = NodePath(".:global_position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath(".:global_rotation")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath(".:velocity")
properties/2/spawn = true
properties/2/replication_mode = 1

[sub_resource type="CircleShape2D" id="CircleShape2D_pm10k"]

[node name="PlayerShip" type="CharacterBody2D"]
collision_layer = 4
collision_mask = 4616
motion_mode = 1
script = ExtResource("1_script")

[node name="PlayerFlashlight" parent="." instance=ExtResource("2_pm10k")]

[node name="LeftLaser" parent="." instance=ExtResource("1_laser")]
position = Vector2(-6, 0)
max_range = 80.0
width = 3.0
color = Color(0.4, 0.9, 1, 1)
damage_per_second = 15.0
direction = Vector2(0, -1)

[node name="RightLaser" parent="." instance=ExtResource("1_laser")]
position = Vector2(6, 0)
max_range = 80.0
width = 3.0
color = Color(0.4, 0.9, 1, 1)
damage_per_second = 15.0
direction = Vector2(0, -1)

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = ExtResource("3_pm10k")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_ship")

[node name="HealthComponent" parent="." instance=ExtResource("4_health")]

[node name="HealthBar" parent="." instance=ExtResource("11_health_bar")]
bar_width = 48.0
bar_height = 5.0
offset_y = 25.0

[node name="SpeedComponent" parent="." instance=ExtResource("5_speed")]
base_speed = 150.0

[node name="WeaponManager" parent="." instance=ExtResource("6_weapon")]

[node name="WeaponHand" type="Node2D" parent="."]
position = Vector2(8, 0)

[node name="PickupArea" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 256

[node name="CollisionShape2D" type="CollisionShape2D" parent="PickupArea"]
shape = SubResource("CircleShape2D_pickup")

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_1")

[node name="AmbientGlow" type="PointLight2D" parent="."]
position = Vector2(0, 3)
color = Color(0.9, 0.9, 1, 1)
energy = 0.6
texture = ExtResource("8_3soja")
texture_scale = 1.2

[node name="Camera2D" type="Camera2D" parent="."]

[node name="PlayerController" type="Node" parent="."]
script = ExtResource("10_controller")

[node name="PlayerHitbox" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="PlayerHitbox"]
shape = SubResource("CircleShape2D_pm10k")
